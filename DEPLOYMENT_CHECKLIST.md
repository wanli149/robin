# ğŸš€ éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

## APPç«¯é…ç½®

### âœ… å¿…é¡»ä¿®æ”¹çš„é…ç½®

- [ ] **APIåœ°å€é…ç½®** (`app/lib/config/api_config.dart`)
  ```dart
  // ä¿®æ”¹ä¸ºå®é™…çš„Cloudflare WorkersåŸŸå
  static const String prodBaseUrl = 'https://your-actual-domain.workers.dev';
  
  // ç¡®è®¤å·²å…³é—­å¼€å‘æ¨¡å¼
  static const bool forceDevMode = false;  // âœ… å¿…é¡»ä¸º false
  ```

- [ ] **åº”ç”¨ç­¾åé…ç½®**
  - Android: `app/android/app/build.gradle` - é…ç½®ç­¾åå¯†é’¥
  - iOS: Xcodeé¡¹ç›® - é…ç½®è¯ä¹¦å’ŒProvisioning Profile

- [ ] **åº”ç”¨æƒé™æ£€æŸ¥**
  - Android: `app/android/app/src/main/AndroidManifest.xml`
    - âœ… INTERNETï¼ˆç½‘ç»œè®¿é—®ï¼‰
    - âœ… ACCESS_NETWORK_STATEï¼ˆç½‘ç»œçŠ¶æ€ï¼‰
    - âœ… WRITE_EXTERNAL_STORAGEï¼ˆå­˜å‚¨æƒé™ï¼Œå¯é€‰ï¼‰
  - iOS: `app/ios/Runner/Info.plist`
    - âœ… NSAppTransportSecurityï¼ˆå…è®¸HTTPï¼‰

- [ ] **ç‰ˆæœ¬å·é…ç½®** (`app/pubspec.yaml`)
  ```yaml
  version: 1.0.0+1  # ä¿®æ”¹ä¸ºå®é™…ç‰ˆæœ¬å·
  ```

---

## åç«¯é…ç½®

### âœ… ç¯å¢ƒå˜é‡é…ç½®

åœ¨Cloudflare Workersè®¾ç½®ä¸­é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

- [ ] **JWT_SECRET** - JWTå¯†é’¥ï¼ˆå¿…éœ€ï¼‰
  ```bash
  # ç”Ÿæˆéšæœºå¯†é’¥
  openssl rand -base64 32
  ```

- [ ] **ADMIN_SECRET_KEY** - ç®¡ç†åå°å¯†é’¥ï¼ˆå¿…éœ€ï¼‰
  ```bash
  # ç”Ÿæˆéšæœºå¯†é’¥
  openssl rand -base64 32
  ```

- [ ] **DINGTALK_WEBHOOK** - é’‰é’‰é€šçŸ¥Webhookï¼ˆå¯é€‰ï¼‰
  ```
  https://oapi.dingtalk.com/robot/send?access_token=xxx
  ```

- [ ] **TMDB_API_KEY** - TMDB APIå¯†é’¥ï¼ˆå¯é€‰ï¼Œç”¨äºè¯„åˆ†ï¼‰
- [ ] **DOUBAN_API_KEY** - è±†ç“£APIå¯†é’¥ï¼ˆå¯é€‰ï¼Œç”¨äºè¯„åˆ†ï¼‰

### âœ… æ•°æ®åº“è¿ç§»

æ‰§è¡Œæ‰€æœ‰æ•°æ®åº“è¿ç§»è„šæœ¬ï¼š

```bash
# 1. åŸºç¡€è¡¨ç»“æ„
wrangler d1 execute robin-db --file=./backend/schema.sql

# 2. èµ„æºç«™ç±»å‹å­—æ®µ
wrangler d1 execute robin-db --file=./backend/migrations/006_add_source_type.sql

# 3. å´©æºƒæ—¥å¿—è¡¨
wrangler d1 execute robin-db --file=./backend/migrations/007_add_crash_reports.sql

# 4. åˆå§‹åŒ–å¸ƒå±€æ•°æ®
wrangler d1 execute robin-db --file=./backend/seed_layout.sql

# 5. åˆå§‹åŒ–èµ„æºç«™æ•°æ®
wrangler d1 execute robin-db --file=./backend/seed_sources.sql
```

### âœ… Cronå®šæ—¶ä»»åŠ¡é…ç½®

åœ¨ `wrangler.toml` ä¸­é…ç½®å®šæ—¶ä»»åŠ¡ï¼š

```toml
[triggers]
crons = ["0 */6 * * *"]  # æ¯6å°æ—¶æ‰§è¡Œä¸€æ¬¡
```

---

## åŠŸèƒ½æµ‹è¯•æ¸…å•

### âœ… æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•

- [ ] **ç”¨æˆ·ç³»ç»Ÿ**
  - [ ] æ³¨å†Œæ–°ç”¨æˆ·
  - [ ] ç™»å½•å·²æœ‰ç”¨æˆ·
  - [ ] Tokenè‡ªåŠ¨åˆ·æ–°

- [ ] **é¦–é¡µ**
  - [ ] åŠ¨æ€å¸ƒå±€åŠ è½½
  - [ ] é¢‘é“åˆ‡æ¢
  - [ ] ä¸‹æ‹‰åˆ·æ–°
  - [ ] è·‘é©¬ç¯æ˜¾ç¤º

- [ ] **è§†é¢‘åŠŸèƒ½**
  - [ ] è§†é¢‘åˆ—è¡¨åŠ è½½
  - [ ] è§†é¢‘æœç´¢ï¼ˆç¼“å­˜æœç´¢ + å®æ—¶æœç´¢ï¼‰
  - [ ] è§†é¢‘è¯¦æƒ…æ˜¾ç¤º
  - [ ] è§†é¢‘æ’­æ”¾
  - [ ] æ’­æ”¾è¿›åº¦è®°å¿†
  - [ ] é€‰é›†åˆ‡æ¢

- [ ] **ç”¨æˆ·åŠŸèƒ½**
  - [ ] æ”¶è—è§†é¢‘
  - [ ] è§‚çœ‹å†å²
  - [ ] é¢„çº¦æ›´æ–°
  - [ ] åé¦ˆæäº¤

- [ ] **çŸ­å‰§åŠŸèƒ½**
  - [ ] çŸ­å‰§åˆ—è¡¨
  - [ ] çŸ­å‰§æ’­æ”¾
  - [ ] çŸ­å‰§åˆ†ç±»

- [ ] **å…¶ä»–åŠŸèƒ½**
  - [ ] å›¾ç‰‡ä»£ç†åŠ è½½
  - [ ] å¹¿å‘Šæ˜¾ç¤ºï¼ˆé—ªå±ã€æš‚åœï¼‰
  - [ ] åˆ†äº«åŠŸèƒ½
  - [ ] ç‰ˆæœ¬æ›´æ–°æ£€æŸ¥

### âœ… æ€§èƒ½æµ‹è¯•

- [ ] é¦–é¡µåŠ è½½æ—¶é—´ < 2ç§’
- [ ] æœç´¢å“åº”æ—¶é—´ < 1ç§’ï¼ˆç¼“å­˜ï¼‰
- [ ] è§†é¢‘è¯¦æƒ…åŠ è½½ < 1ç§’
- [ ] æ’­æ”¾å™¨å¯åŠ¨æ—¶é—´ < 3ç§’

### âœ… å¼‚å¸¸å¤„ç†æµ‹è¯•

- [ ] ç½‘ç»œæ–­å¼€æ—¶çš„æç¤º
- [ ] æ’­æ”¾å¤±è´¥æ—¶çš„åé¦ˆ
- [ ] Tokenè¿‡æœŸæ—¶çš„è·³è½¬
- [ ] å´©æºƒæ—¥å¿—ä¸ŠæŠ¥

---

## ç®¡ç†åå°é…ç½®

### âœ… åˆå§‹åŒ–é…ç½®

- [ ] **ç™»å½•ç®¡ç†åå°**
  - URL: `https://your-domain.com/admin`
  - å¯†é’¥: ä½¿ç”¨ `ADMIN_SECRET_KEY`

- [ ] **é…ç½®èµ„æºç«™**
  - æ·»åŠ å¸¸ç”¨èµ„æºç«™
  - æµ‹è¯•èµ„æºç«™è¿æ¥
  - è®¾ç½®æƒé‡å’Œä¼˜å…ˆçº§

- [ ] **é…ç½®é¦–é¡µå¸ƒå±€**
  - è®¾ç½®å„é¢‘é“çš„æ¨¡å—
  - é…ç½®å¹¿å‘Šä½
  - æµ‹è¯•å¸ƒå±€æ˜¾ç¤º

- [ ] **ç³»ç»Ÿé…ç½®**
  - è®¾ç½®è·‘é©¬ç¯æ–‡æœ¬
  - é…ç½®çƒ­æœå…³é”®è¯
  - è®¾ç½®è”ç³»æ–¹å¼
  - é…ç½®æ°¸ä¹…ç½‘å€

---

## æ€§èƒ½ä¼˜åŒ–

### âœ… åç«¯ä¼˜åŒ–

- [ ] **ç¼“å­˜ç­–ç•¥**
  - [ ] é¦–é¡µå¸ƒå±€ç¼“å­˜ï¼ˆ5åˆ†é’Ÿï¼‰
  - [ ] è§†é¢‘åˆ—è¡¨ç¼“å­˜ï¼ˆ10åˆ†é’Ÿï¼‰
  - [ ] æœç´¢ç»“æœç¼“å­˜ï¼ˆFTS5ï¼‰

- [ ] **æ•°æ®åº“ä¼˜åŒ–**
  - [ ] åˆ›å»ºå¿…è¦çš„ç´¢å¼•
  - [ ] å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®
  - [ ] ä¼˜åŒ–æ…¢æŸ¥è¯¢

### âœ… APPç«¯ä¼˜åŒ–

- [ ] **å›¾ç‰‡ä¼˜åŒ–**
  - [ ] ä½¿ç”¨å›¾ç‰‡ä»£ç†
  - [ ] å¯ç”¨å›¾ç‰‡ç¼“å­˜
  - [ ] æ‡’åŠ è½½å›¾ç‰‡

- [ ] **ç½‘ç»œä¼˜åŒ–**
  - [ ] è¯·æ±‚å»é‡
  - [ ] è‡ªåŠ¨é‡è¯•æœºåˆ¶
  - [ ] è¶…æ—¶æ§åˆ¶

---

## å®‰å…¨æ£€æŸ¥

### âœ… åç«¯å®‰å…¨

- [ ] **è®¤è¯å®‰å…¨**
  - [ ] JWTå¯†é’¥å¼ºåº¦æ£€æŸ¥
  - [ ] Tokenè¿‡æœŸæ—¶é—´è®¾ç½®
  - [ ] Adminæ¥å£ä¿æŠ¤

- [ ] **æ•°æ®å®‰å…¨**
  - [ ] å¯†ç å“ˆå¸Œå­˜å‚¨
  - [ ] SQLæ³¨å…¥é˜²æŠ¤
  - [ ] XSSé˜²æŠ¤

- [ ] **APIå®‰å…¨**
  - [ ] CORSé…ç½®
  - [ ] è¯·æ±‚é¢‘ç‡é™åˆ¶
  - [ ] æ•æ„Ÿä¿¡æ¯è„±æ•

### âœ… APPç«¯å®‰å…¨

- [ ] **ä»£ç æ··æ·†**
  - Android: ProGuardé…ç½®
  - iOS: Bitcodeå¯ç”¨

- [ ] **è¯ä¹¦æ ¡éªŒ**
  - HTTPSè¯ä¹¦éªŒè¯
  - é˜²ä¸­é—´äººæ”»å‡»

---

## ç›‘æ§å’Œæ—¥å¿—

### âœ… ç›‘æ§é…ç½®

- [ ] **é”™è¯¯ç›‘æ§**
  - [ ] å´©æºƒæ—¥å¿—ä¸ŠæŠ¥
  - [ ] æ’­æ”¾å¤±æ•ˆä¸ŠæŠ¥
  - [ ] é’‰é’‰å‘Šè­¦é…ç½®

- [ ] **æ€§èƒ½ç›‘æ§**
  - [ ] APIå“åº”æ—¶é—´
  - [ ] æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
  - [ ] ç¼“å­˜å‘½ä¸­ç‡

- [ ] **ä¸šåŠ¡ç›‘æ§**
  - [ ] æ—¥æ´»ç”¨æˆ·ç»Ÿè®¡
  - [ ] APIè°ƒç”¨ç»Ÿè®¡
  - [ ] è§†é¢‘æ’­æ”¾ç»Ÿè®¡

---

## ä¸Šçº¿åéªŒè¯

### âœ… åŠŸèƒ½éªŒè¯

- [ ] ä½¿ç”¨çœŸå®è®¾å¤‡æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
- [ ] æ£€æŸ¥ç”Ÿäº§ç¯å¢ƒAPIè¿æ¥
- [ ] éªŒè¯æ•°æ®åŒæ­¥æ­£å¸¸
- [ ] æµ‹è¯•ç‰ˆæœ¬æ›´æ–°æµç¨‹

### âœ… æ€§èƒ½éªŒè¯

- [ ] ç›‘æ§APIå“åº”æ—¶é—´
- [ ] æ£€æŸ¥æ•°æ®åº“æ€§èƒ½
- [ ] è§‚å¯Ÿç¼“å­˜å‘½ä¸­ç‡
- [ ] æŸ¥çœ‹é”™è¯¯æ—¥å¿—

---

## å›æ»šè®¡åˆ’

### âœ… å‡†å¤‡å›æ»šæ–¹æ¡ˆ

- [ ] **åç«¯å›æ»š**
  - ä¿ç•™ä¸Šä¸€ç‰ˆæœ¬çš„éƒ¨ç½²
  - å‡†å¤‡æ•°æ®åº“å›æ»šè„šæœ¬
  - è®°å½•é…ç½®å˜æ›´

- [ ] **APPå›æ»š**
  - ä¿ç•™ä¸Šä¸€ç‰ˆæœ¬çš„å®‰è£…åŒ…
  - å‡†å¤‡é™çº§é€šçŸ¥
  - æµ‹è¯•æ—§ç‰ˆæœ¬å…¼å®¹æ€§

---

## ğŸ“ éƒ¨ç½²è®°å½•

| æ—¥æœŸ | ç‰ˆæœ¬ | éƒ¨ç½²äºº | å¤‡æ³¨ |
|------|------|--------|------|
| 2024-XX-XX | 1.0.0 | XXX | åˆå§‹ç‰ˆæœ¬ |

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: APPæ— æ³•è¿æ¥åˆ°åç«¯ï¼Ÿ
A: æ£€æŸ¥ `api_config.dart` ä¸­çš„ `prodBaseUrl` æ˜¯å¦æ­£ç¡®ï¼Œ`forceDevMode` æ˜¯å¦ä¸º `false`

### Q: è§†é¢‘æ— æ³•æ’­æ”¾ï¼Ÿ
A: æ£€æŸ¥èµ„æºç«™é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œæµ‹è¯•èµ„æºç«™è¿æ¥

### Q: å´©æºƒæ—¥å¿—æœªä¸ŠæŠ¥ï¼Ÿ
A: æ£€æŸ¥åç«¯æ˜¯å¦æ‰§è¡Œäº† `007_add_crash_reports.sql` è¿ç§»

### Q: æœç´¢åŠŸèƒ½å¾ˆæ…¢ï¼Ÿ
A: ç¡®è®¤æ˜¯å¦å¯ç”¨äº†ç¼“å­˜æœç´¢æ¥å£ `/api/search_cache`

---

**âœ… å®Œæˆæ‰€æœ‰æ£€æŸ¥é¡¹åï¼Œå³å¯æ­£å¼éƒ¨ç½²ä¸Šçº¿ï¼**
