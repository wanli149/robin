# Flutter APP 构建指南

## 环境要求

- Flutter SDK ^3.10.0
- Android Studio / Xcode
- JDK 17+

## 快速构建

### 1. 安装依赖

```bash
cd app
flutter pub get
```

### 2. 构建 APK

```bash
# 通用版本（约 50-60 MB）
flutter build apk --release

# 分架构版本（推荐）
flutter build apk --release --split-per-abi
```

输出文件：
- `build/app/outputs/flutter-apk/app-arm64-v8a-release.apk` (25-30 MB) ← 推荐
- `build/app/outputs/flutter-apk/app-armeabi-v7a-release.apk` (20-25 MB)

### 3. 安装到设备

```bash
adb install build/app/outputs/flutter-apk/app-arm64-v8a-release.apk
```

## 网络问题解决

如果构建时遇到网络超时：

### 方法 1：配置代理

在 `android/gradle.properties` 中添加：

```properties
systemProp.http.proxyHost=127.0.0.1
systemProp.http.proxyPort=7890
systemProp.https.proxyHost=127.0.0.1
systemProp.https.proxyPort=7890
```

### 方法 2：使用下载脚本

```powershell
.\download_media_kit_libs.ps1
```

## 快速测试

Debug 模式不需要下载额外依赖：

```bash
flutter run
```

## 常见问题

### Q: Gradle 同步失败？

已配置阿里云镜像，检查网络连接或使用 Android Studio 同步。

### Q: 内存不足？

已在 `gradle.properties` 配置 8GB 内存。

### Q: Flutter SDK 找不到？

```bash
flutter doctor
```

检查 Flutter 安装是否正确。

## 功能测试清单

- [ ] 启动页和开屏广告
- [ ] 首页动态布局
- [ ] 视频播放
- [ ] 短剧播放
- [ ] 搜索功能
- [ ] 用户登录/注册
- [ ] 观看历史
- [ ] 收藏功能
