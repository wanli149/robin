name = "robin-backend"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# D1 Database Binding
[[d1_databases]]
binding = "DB"
database_name = "robin-db"
database_id = "local-db"  # For local development, will be updated for production

# KV Namespace Binding
[[kv_namespaces]]
binding = "ROBIN_CACHE"
id = "local-kv"  # For local development, will be updated for production
preview_id = "local-kv"

# Environment Variables (set via wrangler secret put or dashboard)
# JWT_SECRET
# DINGTALK_WEBHOOK
# ADMIN_SECRET_KEY
# TMDB_API_KEY
# DOUBAN_API_KEY

# Cron Triggers
# ğŸš€ ä¼˜åŒ–ï¼šå‡å°‘å®šæ—¶ä»»åŠ¡é¢‘ç‡ï¼ŒèŠ‚çœ Workers è°ƒç”¨é…é¢
# Cloudflare Workers å…è´¹å¥—é¤ï¼š100,000 æ¬¡/å¤©
# ä»˜è´¹å¥—é¤ï¼ˆ$5/æœˆï¼‰ï¼š10,000,000 æ¬¡/æœˆ
[triggers]
crons = [
  "0 */12 * * *",  # å¢é‡é‡‡é›†ï¼šæ¯12å°æ—¶ï¼ˆåŸ6å°æ—¶ï¼‰
  "0 4 * * *",     # å…¨é‡é‡‡é›†ï¼šæ¯å¤©å‡Œæ™¨4ç‚¹ï¼ˆåŸ3ç‚¹ï¼‰
  "0 */6 * * *"    # URLæ£€æµ‹ï¼šæ¯6å°æ—¶ï¼ˆåŸ2å°æ—¶ï¼‰
]
